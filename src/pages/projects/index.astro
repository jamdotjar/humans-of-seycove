---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

const allProjects = await getCollection("projects");
---

<Layout title="projects">
    <div class="max-w-6xl mx-auto px-8 my-8">
        <div class="text-6xl font-serif text-center text-gray-800 mb-4">
            All Projects:
        </div>

        <div
            class="grid grid-cols-1 lg:grid-cols-2 gap-6 gap-y-6 justify-center items-start mx-auto my-6 px-4 md:px-0"
        >
            {
                allProjects.map((project) => (
                    <a
                        href={`/projects/${project.slug}`}
                        class="flex flex-col sm:flex-row bg-white rounded-xl border-1 border-slate-200 shadow-md hover:shadow-lg hover:border-slate-300 hover:-translate-y-1 transition-all duration-200 overflow-hidden"
                    >
                        <div class="w-full sm:w-auto sm:flex-shrink-0 flex justify-center sm:justify-start p-4">
                            {project.data.cover ? (
                                <img
                                    src={project.data.cover.src}
                                    alt={`Photo of ${project.data.author}`}
                                    class="h-32 sm:h-auto sm:max-h-32 sm:w-auto w-full max-w-full object-cover rounded-lg border-1 border-slate-200"
                                />
                            ) : (
                                <div class="h-32 w-full max-w-[200px] sm:w-46 sm:h-32 bg-gray-200 flex items-center justify-center border-2">
                                    <span class="text-gray-500 text-xl">
                                        {project.data.author?.charAt(0) || "?"}
                                    </span>
                                </div>
                            )}
                        </div>
                        <div class="p-6 sm:flex-grow">
                            <p class="text-sm text-gray-600">
                                {project.data.author}
                            </p>
                            <h2 class="text-xl font-semibold text-gray-800">
                                {project.data.title}
                            </h2>
                            <p class="text-gray-600 mt-2 line-clamp-2">
                                {project.data.summary}
                            </p>
                        </div>
                    </a>
                ))
            }
        </div>
    </div>
</Layout>
